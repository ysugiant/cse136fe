@model web136.Models.Major.PLMajor


@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit Major</h2>
<div id="EditMajor"></div>

    @using (Html.BeginForm()) {
        @Html.ValidationSummary(true) 
        
        <fieldset>
            <legend>Fields</legend>
            
            <div class="editor-label">
                @Html.LabelFor(model => model.major_id) 
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.major_id) 
                @Html.ValidationMessageFor(model => model.major_id) 
            </div>
            <p>
                <input id="buttonEdit" type="button" value="Get Major" />
            </p>
            <div class="editor-label">
                @Html.LabelFor(model => model.major_name) 
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.major_name) 
                @Html.ValidationMessageFor(model => model.major_name) 
            </div>
            
            <div class="editor-label">
                @Html.LabelFor(model => model.dept_id) 
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.dept_id) 
                @Html.ValidationMessageFor(model => model.dept_id) 
            </div>
            <p>
                <input type="submit" value="Save" />
            </p>
        </fieldset>
    } 

    <div>
        @Html.ActionLink("Back to List", "Index") 
    </div>
<script type="text/javascript">
    $(document).ready
        (function ()
        {
            $.ajaxSettings.cache = false;
            $(buttonEdit).click
            (
                function ()
                {
                    var id = document.getElementById('major_id').value;
                    $.getJSON
                    (
                        '/Major/GetSampleMajor/',
                        { idx: id },
                        function (data) 
                        {
                            // using jquery library to prepopulate the sample data...
                            //$("#major_id").attr("value", "");
                            $("#major_name").attr("value", data.major_name);
                            $("#dept_id").attr("value", data.dept_id);
                            $(EditMajor).html(data);
                        }
                    )
                }
            );
        }
    );

</script>